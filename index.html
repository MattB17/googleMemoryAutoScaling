

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Google Memory Auto Scaling &mdash; MemoryAutoScaling  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Handling" href="DataHandling/data_handling.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="#" class="icon icon-home"> MemoryAutoScaling
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="DataHandling/data_handling.html">Data Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="Evaluation/evaluation.html">Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Models/models.html">Trace Usage Modelling</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Analysis Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel.html">Parallelization Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Plotting Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="specs.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utility Functions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">MemoryAutoScaling</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>Google Memory Auto Scaling</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="google-memory-auto-scaling">
<h1>Google Memory Auto Scaling<a class="headerlink" href="#google-memory-auto-scaling" title="Permalink to this headline">¶</a></h1>
<p>This package analyzes the Borg traces from Google in May 2019. The original data can be found <a class="reference external" href="https://github.com/google/cluster-data">here</a>. Each trace contains information about maximum memory and CPU usage as well as average memory and CPU usage of a task in periods of 5 minutes.</p>
<p>The purpose of this project is to harvest spare memory and CPU resources from primary jobs running in the Borg cluster. The purpose of this harvesting is to use the spare resources to run secondary batch jobs. In this scenario, priority is given to primary jobs. Thus, the goal is to schedule these batch jobs on the spare resources in such a way that the jobs are rarely throttled or killed because they are stealing resources from the primary jobs.</p>
<p>The code contains functions and scripts for loading raw trace files, performing pre-processing, and modeling the maximum memory usage or maximum CPU usage for each trace.</p>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install the package:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/MattB17/googleMemoryAutoScaling.git</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">cd</span> <span class="pre">MemoryAutoScaling</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-r</span> <span class="pre">requirements.txt</span></code></p></li>
<li><p><code class="code docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">pip</span> <span class="pre">install</span> <span class="pre">.</span></code></p></li>
</ul>
</div>
<div class="section" id="scripts">
<h2>Scripts<a class="headerlink" href="#scripts" title="Permalink to this headline">¶</a></h2>
<p>The <code class="code docutils literal notranslate"><span class="pre">Scripts</span></code> folder contains python scripts to run models on traces or provide statistical summaries. There are 3 types of scripts:</p>
<ul class="simple">
<li><p><code class="code docutils literal notranslate"><span class="pre">Multivariate</span></code> for running multivariate models</p>
<ul>
<li><p>The multivariate scripts can be run from the command line and take 6 arguments specifying the input directory for trace files, the output directory for the results, the prefix name for traces in the input directory, the minimum length for a trace, the proportion of data in the training set, and an integer representing the number of consecutive periods to aggregate for the modeling</p></li>
<li><p>For example, the following runs the VARMA models on all traces stored in csv files starting with <code class="code docutils literal notranslate"><span class="pre">task_usage_df</span></code> in <code class="code docutils literal notranslate"><span class="pre">&lt;input_dir&gt;</span></code>, the traces must have a minimum length of <code class="code docutils literal notranslate"><span class="pre">12</span></code>, are aggregated every <code class="code docutils literal notranslate"><span class="pre">3</span></code> time periods, with <code class="code docutils literal notranslate"><span class="pre">70%</span></code> of data in the training set, and the results are output to <code class="code docutils literal notranslate"><span class="pre">&lt;output_dir&gt;</span></code></p>
<ul>
<li><p><code class="code docutils literal notranslate"><span class="pre">python</span> <span class="pre">Scripts/Multivariate/buildVARMAModels.py</span> <span class="pre">&lt;input_dir&gt;</span> <span class="pre">&lt;output_dir&gt;</span> <span class="pre">task_usage_df</span> <span class="pre">12</span> <span class="pre">0.7</span> <span class="pre">3</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="code docutils literal notranslate"><span class="pre">Univariate</span></code> for running univariate models</p>
<ul>
<li><p>The univariate scripts can be run from the command line and take 7 arguments specifying the input directory for trace files, the output directory for the results, the prefix name for traces in the input directory, the minimum length for a trace, the proportion of data in the training set, an integer representing the number of consecutive periods to aggregate for the modeling, and a boolean flag indicating if maximum memory usage is the target variable or maximum CPU usage</p></li>
<li><p>For example, the following runs the Regression models on all traces stored in csv files starting with <code class="code docutils literal notranslate"><span class="pre">task_usage_df</span></code> in <code class="code docutils literal notranslate"><span class="pre">&lt;input_dir&gt;</span></code>, the traces must have a minimum length of <code class="code docutils literal notranslate"><span class="pre">12</span></code>, are aggregated every <code class="code docutils literal notranslate"><span class="pre">3</span></code> time periods, with <code class="code docutils literal notranslate"><span class="pre">70%</span></code> of data in the training set, the target variable is maximum memory usage, and the results are output to <code class="code docutils literal notranslate"><span class="pre">&lt;output_dir&gt;</span></code></p>
<ul>
<li><p><code class="code docutils literal notranslate"><span class="pre">python</span> <span class="pre">Scripts/Univariate/buildRegModels.py</span> <span class="pre">&lt;input_dir&gt;</span> <span class="pre">&lt;output_dir&gt;</span> <span class="pre">task_usage_df</span> <span class="pre">12</span> <span class="pre">0.7</span> <span class="pre">3</span> <span class="pre">True</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="code docutils literal notranslate"><span class="pre">Statistical</span></code> to run statistical summaries</p>
<ul>
<li><p>The statistical scripts can be run from the command line and take 6 argument specifying the input directory for trace files, the output directory for the results, the prefix name for traces in the input directory, the minimum length for a trace, an integer representing the number of consecutive periods to aggregate for the summary, and a boolean flag indicating if maximum memory usage is the target variable or maximum CPU usage</p></li>
<li><p>For example, the following runs the statistical analysis on all traces stored in csv files starting with <code class="code docutils literal notranslate"><span class="pre">task_usage_df</span></code> in <code class="code docutils literal notranslate"><span class="pre">&lt;input_dir&gt;</span></code>, the traces must have a minimum length of <code class="code docutils literal notranslate"><span class="pre">12</span></code>, are aggregated every <code class="code docutils literal notranslate"><span class="pre">3</span></code> time periods, the target variable is maximum CPU usage, and the results are output to <code class="code docutils literal notranslate"><span class="pre">&lt;output_dir&gt;</span></code></p>
<ul>
<li><p><code class="code docutils literal notranslate"><span class="pre">python</span> <span class="pre">Scripts/Statistical/getTraceStats.py</span> <span class="pre">&lt;input_dir&gt;</span> <span class="pre">&lt;output_dir&gt;</span> <span class="pre">task_usage_df</span> <span class="pre">12</span> <span class="pre">3</span> <span class="pre">False</span></code></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="analysis">
<h2>Analysis<a class="headerlink" href="#analysis" title="Permalink to this headline">¶</a></h2>
<p>The <code class="code docutils literal notranslate"><span class="pre">Notebooks</span></code> folder contains jupyter notebooks used to conduct the analysis.</p>
<p>These notebooks assume the scripts in the <code class="code docutils literal notranslate"><span class="pre">Scripts</span></code> folder have been run with the appropriate parameters and have been saved in a folder labeled <code class="code docutils literal notranslate"><span class="pre">output_data</span></code>.</p>
<p>The results of the statistical analysis on the traces can be found <a class="reference external" href="https://docs.google.com/document/d/1K7BBxZMQ5QlbUrKDK4NnTBq--luysnHjai97oCy94HA/edit">here</a></p>
<p>The results of the modeling procedures on the traces can be found <a class="reference external" href="https://docs.google.com/document/d/16n9JSmnUdko3LTuFWJ0YN_qZpUGBaHSoHmaMigGJYLI/edit#heading=h.fjx4h8ju152c">here</a></p>
</div>
</div>
<div class="section" id="code-contents">
<h1>Code Contents<a class="headerlink" href="#code-contents" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="DataHandling/data_handling.html">Data Handling</a><ul>
<li class="toctree-l2"><a class="reference internal" href="DataHandling/trace_usage.html">Trace Usage Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="DataHandling/trace.html">Google Trace</a></li>
<li class="toctree-l2"><a class="reference internal" href="DataHandling/trace_handler.html">Trace Handler</a></li>
<li class="toctree-l2"><a class="reference internal" href="DataHandling/trace_generator.html">Trace Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="DataHandling/ml_data_handler.html">ML Data Handler</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Evaluation/evaluation.html">Evaluation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Evaluation/harvest_stats.html">Harvest Statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="Evaluation/model_results.html">Model Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="Evaluation/trace_analyzer.html">Trace Analyzer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Models/models.html">Trace Usage Modelling</a><ul>
<li class="toctree-l2"><a class="reference internal" href="Models/trace_model.html">Trace Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="Models/Sequential/sequential.html">Sequential Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="Models/Statistical/statistical.html">Statistical Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="Models/ML/ml.html">ML Models</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Analysis Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel.html">Parallelization Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotting.html">Plotting Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="specs.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">Utility Functions</a></li>
</ul>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="DataHandling/data_handling.html" class="btn btn-neutral float-right" title="Data Handling" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Matt Buckley

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>